<div class="flex w-full h-full overflow-hidden antialiased text-gray-800 bg-white">

  <div class="flex flex-col flex-1">

    <header aria-label="page caption"
      class="flex items-center justify-between flex-none h-16 px-4 bg-gray-100 border-t">
      <h1 id="page-caption" class="text-lg font-semibold">Dashboard</h1>
      <ul class="flex items-center px-8">
        <li class="relative">
          <input (click)="openSearch()" title="Search Bar" aria-label="search bar" role="search"
            class="w-4 py-2 pl-4 pr-8 placeholder-transparent transition-all duration-300 ease-in-out rounded-md cursor-pointer focus:border-black focus:cursor-text focus:w-64 focus:placeholder-gray-500"
            type="text" placeholder="Search Chi Desk Support">
          <i class="absolute top-0 right-0 flex items-center h-full pr-3 pointer-events-none">
            <svg class="w-4 h-4 mx-auto fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
              viewBox="0 0 24 24">
              <path
                d="M21.172 24l-7.387-7.387c-1.388.874-3.024 1.387-4.785 1.387-4.971 0-9-4.029-9-9s4.029-9 9-9 9 4.029 9 9c0 1.761-.514 3.398-1.387 4.785l7.387 7.387-2.828 2.828zm-12.172-8c3.859 0 7-3.14 7-7s-3.141-7-7-7-7 3.14-7 7 3.141 7 7 7z">
              </path>
            </svg>
          </i>
        </li>
      </ul>

    </header>

    <main class="grid min-h-0 grid-cols-12 border-t">
      <div class="grid col-span-3">
        <section class="flex flex-col flex-none w-full max-w-sm min-h-0 p-4 overflow-auto bg-gray-100">
          <h1 class="mb-3 font-semibold">
            Profiles
          </h1>
          <ul>
            <li *ngFor="let p of groups" (click)="openPosts(p.posts)">
              <article tabindex="0"
                class="flex p-3 mb-2 text-gray-700 bg-white border rounded-md cursor-pointer hover:border-green-500 focus:outline-none focus:border-green-500">
                <!-- {{ p | json}} -->
                <span class="flex-none pt-1 pr-2">
                  <img class="w-8 h-8 rounded-md"
                    src="https://raw.githubusercontent.com/bluebrown/tailwind-zendesk-clone/master/public/assets/avatar.png" />
                </span>
                <div class="flex-1">
                  <header class="mb-1">
                    <h1 class="inline">
                      <span class="font-semibold">{{p?.name}}</span>
                    </h1>
                  </header>
                  <p class="text-gray-600">
                    {{p?.numberOfFollowers}}
                  </p>
                  <footer class="mt-2 text-sm text-gray-500">
                    {{p?.about}}
                  </footer>
                </div>
              </article>
            </li>
          </ul>
        </section>
      </div>

      <div class="col-span-9" *ngIf="posts.length > 0">
        <section aria-label="main content" class="flex flex-col flex-auto min-h-0 border-l">
          <nav class="flex p-4 bg-gray-100">
      
            <!-- stats nav -->
            <section aria-labelledby="ticket-statistics-tabs-label" class="pb-2">
              <label id="ticket-statistics-tabs-label" class="block mb-1 text-sm font-semibold">Statistics</label>
              <ul class="flex">
                <li>
                  <button
                    class="flex flex-col items-center w-24 p-2 bg-white border border-r-0 focus:outline-none focus:bg-yellow-200 rounded-l-md">
                    <p class="text-lg font-semibold">{{posts?.length}}</p>
                    <p class="text-sm text-gray-600 uppercase">
                      Number Of Posts
                    </p>
                  </button>
                </li>
              </ul>
            </section>
          </nav>

          <table aria-describedby="info-popup" aria-label="open tickets"
            class="flex flex-col w-full h-full min-h-0 border-t">
            <thead class="flex flex-col w-full px-4">
              <tr class="flex border-b">
                <th class="w-24 px-1 py-3 font-semibold text-left truncate">
                  #
                </th>
                <th class="w-full max-w-xs px-1 py-3 font-semibold text-left truncate xl:max-w-lg">
                  Post Content
                </th>
                <th class="flex-1 px-1 py-3 font-semibold text-left truncate">
                  Post Id
                </th>
                <th class="flex-1 px-1 py-3 font-semibold text-left truncate">
                  Number Of Likes
                </th>
                <th class="flex-1 px-1 py-3 font-semibold text-left truncate">
                  Number Of Shares
                </th>
                <th class="flex-1 px-1 py-3 font-semibold text-left truncate">
                  Time Of Post
                </th>
              </tr>
            </thead>
            <tbody class="flex flex-col flex-1 w-full min-h-0 px-4 overflow-hidden">
              <tr *ngFor="let post of posts; let i=index" role="row" class="flex border-b cursor-pointer hover:bg-blue-100">
                <td class="w-24 px-1 py-3">
                  {{i+1}}
                </td>
                <td class="w-full max-w-xs px-1 py-3 xl:max-w-lg">
                  <div class="relative w-full group">
                    <p class="w-full truncate" title="{{post?.postId}}">
                      {{post?.postContent}}
                    </p>
                    <!-- dropdown -->
                    <span
                      class="absolute top-0 z-50 hidden w-screen max-w-lg p-6 mt-10 ml-4 text-gray-900 bg-white border rounded-md shadow-lg group-hover:block">
                      <article>
                        <header>
                          <div>
                            <span
                              class="px-3 py-1 text-xs leading-none text-white uppercase bg-blue-600 rounded-sm">Facebook</span>
                            <span class="ml-2 text-gray-700">{{post?.numberOfLikes}} Reaction</span>
                            <span class="ml-1">{{post?.numberOfShares}} Shares</span>
                          </div>
                        </header>
                        <section class="mt-5">
                          <h1 class="mt-3 text-sm font-semibold">
                            {{post?.timeOfPost}}
                          </h1>
                          <p class="mt-3">
                            {{post?.postContent}}
                          </p>
                        </section>
                      </article>
                    </span>
                    <!-- end dropdown -->
                  </div>
                </td>
                <td class="flex-1 px-1 py-3 truncate">
                 {{post?.postId}}
                </td>
                <td class="flex-1 px-1 py-3 truncate">
                  {{post?.numberOfLikes}}
                </td>
                <td class="flex-1 px-1 py-3 truncate">
                  {{post?.numberOfShares}}
                </td>
                <td class="flex-1 px-1 py-3 truncate">
                  {{post?.timeOfPost}}
                </td>
              </tr>
            </tbody>
          </table>

          <!-- content footer, currently hidden -->
          <footer aria-label="content footer" class="flex hidden p-3 bg-white border-t">
            footer
          </footer>
        </section>
      </div>
    </main>
  </div>
</div>
<app-search *ngIf="searchView" (searchName)="onSearch($event)"></app-search>